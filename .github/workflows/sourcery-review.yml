name: Sourcery Code Review

on:
  pull_request:
    branches: [ main, master, develop ]
  push:
    branches: [ main, master, develop ]

jobs:
  sourcery-review:
    runs-on: ubuntu-latest
    permissions:
      contents: read
      pull-requests: write
    steps:
      - name: Checkout code
        uses: actions/checkout@v4
        with:
          fetch-depth: 0  # Required for Sourcery to analyze the full git history

      - name: Run Sourcery Review
        uses: sourcery-ai/action@v1
        with:
          # Get your token from https://app.sourcery.ai/dashboard (Account Settings â†’ API Tokens)
          # For open source projects, token may not be required
          # If using GitHub App, authentication may be automatic
          token: ${{ secrets.SOURCERY_TOKEN }}
          # Optional: specify paths to review
          # paths: src/main/java
          # Optional: enable auto-fix
          # fix: true

